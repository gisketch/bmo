services:
  agent:
    build:
      context: .
      dockerfile: Dockerfile
    env_file: .env.local
    network_mode: host
    restart: unless-stopped

  web:
    build:
      context: .
      dockerfile: frontend/Dockerfile
      args:
        - LIVEKIT_API_KEY=${LIVEKIT_API_KEY}
        - LIVEKIT_API_SECRET=${LIVEKIT_API_SECRET}
        - LIVEKIT_URL=${LIVEKIT_PUBLIC_URL}
    ports:
      - "3001:3001"
    restart: unless-stopped
    depends_on:
      - agent
